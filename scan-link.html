<!doctype html>
<html lang="ar" dir="rtl">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>فحص رابط — إشعارك</title><link rel="stylesheet" href="style.css"></head>
<body>
  <div class="site-shell">
    <aside class="sidebar"><div class="brand"><div class="logo">أبشر</div><div class="title">إشعارك</div></div><nav class="nav"><a href="index.html">الرئيسية</a><a href="ishaarak.html">إشعارك</a><a class="active" href="scan-link.html">فحص رابط</a></nav></aside>
    <main class="main">
      <header class="header"><div class="title">فحص رابط — إشعارك</div></header>
      <section class="box">
        <label>ألصق الرابط هنا</label>
        <div style="display:flex;gap:8px;margin-top:8px">
          <input id="scan-url" placeholder="https://example.com/..." style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd">
          <button id="scan-btn" class="tool" style="background:var(--green2);color:#fff;border:0">فحص</button>
        </div>
        <div id="scan-output" style="margin-top:12px"></div>
      </section>
    </main>
  </div>
  <script>
    async function heuristics(url){
      try{ new URL(url);}catch(e){ return {result:'invalid',msg:'رابط غير صالح'} }
      let score=0, notes=[];
      const low = url.toLowerCase();
      if(low.includes('login')||low.includes('secure')||low.includes('verify')){ score+=25; notes.push('الكلمات بداخله قد توحي بمححاولة انتحال'); }
      if(low.match(/\b\d{1,3}(\.\d{1,3}){3}\b/)){ score+=30; notes.push('النطاق يبدو عنوان IP'); }
      if(low.includes('bit.ly')||low.includes('tinyurl')){ score+=20; notes.push('رابط مختصر'); }
      if(low.match(/\.(exe|zip|scr|msi)$/)) { score+=40; notes.push('امتداد ملف خبيث محتمل'); }
      const level = score>40?'خطر عالي': score>15?'مشكوك':'آمن';
      return {result:level,score,notes};
    }
    document.getElementById('scan-btn').addEventListener('click', async ()=>{
      const u = document.getElementById('scan-url').value.trim(); const out = document.getElementById('scan-output'); out.innerHTML='جاري التحليل...';
      const r = await heuristics(u);
      let color = r.result==='خطر عالي'?'#ffd7d7': r.result==='مشكوك'?'#fff6d6':'#e7f9ee';
      out.innerHTML = `<div style="padding:12px;background:${color};border-radius:8px"><strong>النتيجة:</strong> ${r.result}<br>درجة: ${r.score}<br>${r.notes.length?'<ul>'+r.notes.map(n=>'<li>'+n+'</li>').join('')+'</ul>':''}</div>`;
    });
  </script>
</body>
</html>
